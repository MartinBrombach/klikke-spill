<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Document</title>
  </head>
  <script>
    var cps = 1;
    var verdi = 0;
    var myInterval;
    var lyder = true
    var autostart = true;
    var butikkmulti = 1.1;
    var prestigeCost = 500000000
    var levelarray = [0, 0, 0, 0, 0, 0, 0, 0, 0]
    var cpsadd = [1, 5, 10, 50, 250 ,1000, 5000, 25000, 100000]
    var pricearray = [10, 100, 1500, 30000, 150000, 600000, 1500000, 10000000, 80000000];

    window.onload=oppstart;


    function numFormatter(num, desimal) {
      // Formaterer nummer
    if(num > 999 && num < 1000000){
        return (num/1000).toFixed(desimal) + 'k'; // convert to k for number from > 1000 < 1 million
    }else if(num > 1000000 && num < 1000000000){
        return (num/1000000).toFixed(desimal) + 'M'; // convert to M for number from > 1 million
    }else if(num > 1000000000 && num < 1000000000000){
        return (num/1000000000).toFixed(desimal) + 'B'; // convert to M for number from > 1 million
    }else if(num > 1000000000000 && num < 1000000000000000){
        return (num/1000000000000).toFixed(desimal) + 'T'; // convert to M for number from > 1 million
    }else if(num > 1000000000000000){
        return (num/1000000000000000).toFixed(desimal) + 'Q'; // convert to M for number from > 1 million
    }else if(num < 999){
        return num.toFixed(); // if value < 1000, nothing to do
    }
}

    function oppstart(){
      // Skriver ut hvor mye oppgraderingene koster på oppstart
      for(var i=0;i<9;i++){
        var pricetemp = 'b'+(i+1);
        document.getElementById(pricetemp).innerHTML = numFormatter(Math.round(pricearray[i])) + "$";
        var pricetemp = 'tap'+(i+1);
        document.getElementById(pricetemp).innerHTML = "+"+numFormatter(Math.round(cpsadd[i]))+" Tap";
    }
    }

    function oppgrader(elementpressed) {
      // Hodterer oppgraderinger
      var mengde_penger = parseInt(document.getElementById("coin").getAttribute("value"));
      var referanse = parseInt(elementpressed.getAttribute("name"));
      if(mengde_penger>=pricearray[referanse]){
        // Oppdatere cps display
        cps += cpsadd[referanse]
        document.getElementById("clickpersec").innerHTML=numFormatter(Math.round(cps)) + " coins/click";
        // Oppdatere intern megde per klikk og mengde penger
        var new_value = mengde_penger-pricearray[referanse]
        document.getElementById("coin").setAttribute("value", new_value);
        document.getElementById("sums").innerHTML = numFormatter(new_value, 2);
        pricearray[referanse] = Math.ceil(pricearray[referanse] * butikkmulti);
        // Oppdatere pris
        var pricetemp = 'b'+(referanse+1);
        document.getElementById(pricetemp).innerHTML = numFormatter(Math.round(pricearray[referanse])) + "$";
        // Oppdatere levels
        levelarray[referanse]++
        var leveltemp = 'l'+(referanse+1);
        document.getElementById(leveltemp).innerHTML = "lvl " + numFormatter(Math.round(levelarray[referanse]));
        nokpeng();
        prestigeCheck(new_value);
    }}

    function lydswitchb() {
      // Denne funksjonen skal man lime inn for å sjekke om lyder er på eller ikke.
      if (lyder) {
      return true;
    } else {
      return false;
    }
    }

    function lydswitch() {
      // Lydswitch
      if (lyder) {
      document.getElementById('volume-icon').name="volume-mute-outline"
      lyder = false;
    } else {
      document.getElementById('volume-icon').name="volume-high-outline"
      lyder = true
    }
    }

    function autoclick() {
      // Starter og stopper autoklikkeren
      var audio = new Audio("sounds/flick.mp3");
      if (lydswitchb()) {
            audio.play();
          }
      if (autostart) {
        myInterval = setInterval(clik, 500);
        autostart = false;
        document.getElementById("autoclickid").style.backgroundColor =
          "rgb(91, 202, 51)";
        document.getElementById("autoclickiddiv").style.top = "0";
      } else if (!autostart) {
        clearInterval(myInterval);
        autostart = true;
        document.getElementById("autoclickid").style.backgroundColor =
          "rgb(202, 51, 51)";
        document.getElementById("autoclickiddiv").style.top = "50%";
      }
    }

    function clik() {
      // Legger til riktig menge penger i pengene
      var mengde_penger = parseInt(
        document.getElementById("coin").getAttribute("value")
      );
      mengde_penger += cps;
      document.getElementById("coin").setAttribute("value", mengde_penger);
      document.getElementById("sums").innerHTML = numFormatter(mengde_penger, 2);
      prestigeCheck(mengde_penger);
      nokpeng();
    }

    function prestigeCheck(nokpengertilprestige){
      // Sjekker om man har nok penger til å prestige
      document.getElementById("bar").setAttribute("value", nokpengertilprestige);
      if (nokpengertilprestige>=document.getElementById("bar").getAttribute("max")){
        document.getElementById("bar").style.display="none";
        document.getElementById("pres_knapp").style.display="block";
      } else{
        document.getElementById("bar").style.display="block";
        document.getElementById("pres_knapp").style.display="none";
      }
    }



    function prestige(){
      // Øke hvor mye man får for oppgraderinger og priser på oppgraderinger. x2 på oppgraderinger x2.5 for priser
      pricearray.forEach((num, index) => {
        pricearray[index] = num * 1.5;
      });
      butikkmulti = butikkmulti * 1.5
      cpsadd.forEach((num, index) => {
      cpsadd[index] = num * 1.5;
      });
      document.getElementById("clickpersec").innerHTML= 1 + " coins/click";
      for(var i=0;i<9;i++){
        var taptemp = 'tap'+(i+1);
        document.getElementById(taptemp).innerHTML = "+"+ numFormatter(Math.round(cpsadd[i]))+" Tap";
        var leveltemp = 'l'+(i+1);
        document.getElementById(leveltemp).innerHTML = "lvl " + 0;
        var pricetemp = 'b'+(i+1);
        document.getElementById(pricetemp).innerHTML = numFormatter(Math.round(pricearray[i])) + "$";
      }
      levelarray.forEach((num, index) => {
      levelarray[index] = num * 0;
      });
      cps = 1
      // Oppdatere intern megde per klikk og mengde penger
      var new_value = 0
      document.getElementById("coin").setAttribute("value", new_value);
      document.getElementById("sums").innerHTML = numFormatter(new_value, 2);
      nokpeng()
      prestigeCheck()
    }

    function nokpeng() {
      // Endrer farge på Buy knapp for å vise om man har nok penger eller ikke
      var testtt = parseInt(
        document.getElementById("coin").getAttribute("value")
      );
      for(var i=0;i<9;i++){
        var buyback = 'buybg'+(i+1);
        if (pricearray[i] > testtt) {
        document.getElementById(buyback).style.backgroundColor = "#da0000";
      } else {
        document.getElementById(buyback).style.backgroundColor = "#54da00";
      }
    }
    }
  </script>

  <body>
    <p id="designed">Utviklet av Adrian Gunnerod og <br>Martin Ek Brombach</p>
    <nav>
      <div id="nav-icons">
        <a href="#">
          <ion-icon name="person-circle" class="stats-icon"></ion-icon>
        </a>

        <a href="#">
          <ion-icon name="stats-chart" class="stats-icon"></ion-icon>
        </a>
        <a>
        <ion-icon name="volume-high-outline" class="stats-icon" onclick="lydswitch()" id="volume-icon" style="cursor: pointer;"></ion-icon>
      </a>
      </div>
      <div onclick="autoclick()" id="autoclickid">
        <div id="autoclickiddiv"></div>
      </div>
    </nav>
    <div id="click-space">
      <div id="sum">
        <div id="sums">0</div>
      </div>
      <div id="coin" value="0" onclick="clik(this)"></div>
      <div id="prest">
        <p id="prest-p">Prestige</p>
        <p id="small-text"></p>
        <div id="pres_knapp" onclick="prestige()">Trykk for å prestige</div>
        <progress value="0" max="500000000" id="bar"></progress>
      </div>
    </div>
    <div id="upgrades">
      <div id="upgrade-text">
        <h2>Oppgraderinger</h2>
      </div>
      <p id="clickpersec">1 coins/click</p>
      <div id="upgrades-upgrades">
        <div class="upgrade-item">
          <div class="upgrade-item-icon">
            <img src="icons/tim.png" alt="tim" style="height: 70px" />
          </div>
          <div class="upgrade-item-amount">
            <p>Tim<span class="show-lvl" id="l1">lvl 0</span></p>
            <p id="tap1"></p>
          </div>
          <div
            class="upgrade-item-price"
            name="0"
            onclick="oppgrader(this)"
            id="buybg1"
          >
            Buy<span class="show-lvl" id="b1"></span>
          </div>
        </div>
        <div class="upgrade-item">
          <div class="upgrade-item-icon">
            <img src="icons/printer.png" alt="printer" style="height: 70px" />
          </div>
          <div class="upgrade-item-amount">
            <p>Printer<span class="show-lvl" id="l2">lvl 0</span></p>
            <p id="tap2"></p>
          </div>
          <div
            class="upgrade-item-price"
            name="1"
            onclick="oppgrader(this)"
            id="buybg2"
          >
            Buy<span class="show-lvl" id="b2"></span>
          </div>
        </div>
        <div class="upgrade-item">
          <div class="upgrade-item-icon">
            <img src="icons/magi.png" alt="magi" style="height: 70px" />
          </div>
          <div class="upgrade-item-amount">
            <p>Magi<span class="show-lvl" id="l3">lvl 0</span></p>
            <p id="tap3"></p>
          </div>
          <div
            class="upgrade-item-price"
            name="2"
            onclick="oppgrader(this)"
            id="buybg3"
          >
            Buy<span class="show-lvl" id="b3"></span>
          </div>
        </div>
        <div class="upgrade-item">
          <div class="upgrade-item-icon">
            <img src="icons/jamal.png" alt="jamal" style="height: 70px" />
          </div>
          <div class="upgrade-item-amount">
            <p>Jamal<span class="show-lvl" id="l4">lvl 0</span></p>
            <p id="tap4"></p>
          </div>
          <div
            class="upgrade-item-price"
            name="3"
            onclick="oppgrader(this)"
            id="buybg4"
          >
            Buy<span class="show-lvl" id="b4"></span>
          </div>
        </div>
        <div class="upgrade-item">
          <div class="upgrade-item-icon">
            <img src="icons/ball.png" alt="ball" style="height: 70px" />
          </div>
          <div class="upgrade-item-amount">
            <p>Gumball<span class="show-lvl" id="l5">lvl 0</span></p>
            <p id="tap5"></p>
          </div>
          <div
            class="upgrade-item-price"
            name="4"
            onclick="oppgrader(this)"
            id="buybg5"
          >
            Buy<span class="show-lvl" id="b5"></span>
          </div>
        </div>
        <div class="upgrade-item">
          <div class="upgrade-item-icon">
            <img src="icons/atm.png" alt="atm" style="height: 70px" />
          </div>
          <div class="upgrade-item-amount">
            <p>ATM<span class="show-lvl" id="l6">lvl 0</span></p>
            <p id="tap6"></p>
          </div>
          <div
            class="upgrade-item-price"
            name="5"
            onclick="oppgrader(this)"
            id="buybg6"
          >
            Buy<span class="show-lvl" id="b6"></span>
          </div>
        </div>
        <div class="upgrade-item">
          <div class="upgrade-item-icon">
            <img src="icons/bank.png" alt="bank" style="height: 70px" />
          </div>
          <div class="upgrade-item-amount">
            <p>Bank<span class="show-lvl" id="l7">lvl 0</span></p>
            <p id="tap7"></p>
          </div>
          <div
            class="upgrade-item-price"
            name="6"
            onclick="oppgrader(this)"
            id="buybg7"
          >
            Buy<span class="show-lvl" id="b7"></span>
          </div>
        </div>
        <div class="upgrade-item">
          <div class="upgrade-item-icon">
            <img src="icons/mine.png" alt="mine" style="width: 70px" />
          </div>
          <div class="upgrade-item-amount">
            <p>Mine<span class="show-lvl" id="l8">lvl 0</span></p>
            <p id="tap8"></p>
          </div>
          <div
            class="upgrade-item-price"
            name="7"
            onclick="oppgrader(this)"
            id="buybg8"
          >
            Buy<span class="show-lvl" id="b8"></span>
          </div>
        </div>
        <div class="upgrade-item">
          <div class="upgrade-item-icon">
            <img src="icons/jamal2nd.png" alt="tim" style="height: 70px" />
          </div>
          <div class="upgrade-item-amount">
            <p>Jamal II<span class="show-lvl" id="l9">lvl 0</span></p>
            <p id="tap9"></p>
          </div>
          <div
            class="upgrade-item-price"
            name="8"
            onclick="oppgrader(this)"
            id="buybg9"
          >
            Buy<span class="show-lvl" id="b9"></span>
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
  </body>

</html>
